<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Browser Sensor Playground</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 64 64%22><text y=%2250%%22 font-size=%2252%22>ğŸ’»</text></svg>">
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #0f0;
      padding: 1.5rem;
    }

    h1,
    h2 {
      color: #00ff99;
    }

    button {
      padding: 0.6rem 1rem;
      margin: 0.3rem;
      font-size: 1rem;
      background: #333;
      color: #0f0;
      border: 1px solid #0f0;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #0f0;
      color: #111;
    }

    .output {
      background: #222;
      padding: 0.7rem;
      border-radius: 8px;
      font-family: monospace;
      margin-top: 0.5rem;
    }
  </style>
</head>

<body>
  <h1>ğŸŒ Browser Sensor Playground</h1>
  <p>Click the buttons below to enable and visualize different sensors.</p>

  <hr>

  <!-- Device Motion -->
  <h2>ğŸ“± Accelerometer (DeviceMotionEvent)</h2>
  <button id="startMotion">Start Motion Sensor</button>
  <div id="motionOutput" class="output">Not started.</div>

  <hr>

  <!-- Device Orientation -->
  <h2>ğŸ§­ Orientation (DeviceOrientationEvent)</h2>
  <button id="startOrientation">Start Orientation Sensor</button>
  <div id="orientationOutput" class="output">Not started.</div>

  <hr>

  <!-- Generic Sensor API -->
  <h2>ğŸ§© Generic Sensor API (Accelerometer)</h2>
  <button id="startGeneric">Start Generic Accelerometer</button>
  <div id="genericOutput" class="output">Not started.</div>

  <hr>

  <!-- Touch Input -->
  <h2>ğŸ‘† Touch Input</h2>
  <p>Touch or drag your finger on the screen.</p>
  <div id="touchOutput" class="output">Waiting for touch...</div>

  <hr>

  <!-- Voice Input -->
  <h2>ğŸ¤ Web Speech API</h2>
  <button id="startVoice">Start Voice Recognition</button>
  <div id="voiceOutput" class="output">Not started.</div>

  <hr>

  <!-- Geolocation -->
  <h2>ğŸ“ Geolocation</h2>
  <button id="getLocation">Get My Location</button>
  <div id="geoOutput" class="output">Not started.</div>

  <hr>

  <!-- Ambient Light -->
  <h2>ğŸ’¡ Ambient Light Sensor</h2>
  <button id="startLight">Start Light Sensor</button>
  <div id="lightOutput" class="output">Not started.</div>

  <script>
    // --- Device Motion ---
    document.getElementById("startMotion").onclick = async () => {
      const output = document.getElementById("motionOutput");

      // iOS requires permission from user gesture
      if (typeof DeviceMotionEvent.requestPermission === "function") {
        const response = await DeviceMotionEvent.requestPermission();
        if (response !== "granted") {
          output.textContent = "Permission denied.";
          return;
        }
      }

      window.addEventListener("devicemotion", (event) => {
        const acc = event.accelerationIncludingGravity;
        const rot = event.rotationRate;
        output.innerHTML = `
          Acceleration (m/sÂ²):<br>
          x: ${acc?.x?.toFixed(2)} | y: ${acc?.y?.toFixed(2)} | z: ${acc?.z?.toFixed(2)}<br>
          Rotation (Â°/s):<br>
          alpha: ${rot?.alpha?.toFixed(2)} | beta: ${rot?.beta?.toFixed(2)} | gamma: ${rot?.gamma?.toFixed(2)}
        `;
      });
    };

    // --- Device Orientation ---
    document.getElementById("startOrientation").onclick = async () => {
      const output = document.getElementById("orientationOutput");

      if (typeof DeviceOrientationEvent.requestPermission === "function") {
        const response = await DeviceOrientationEvent.requestPermission();
        if (response !== "granted") {
          output.textContent = "Permission denied.";
          return;
        }
      }

      window.addEventListener("deviceorientation", (event) => {
        output.innerHTML = `
          alpha (compass): ${event.alpha?.toFixed(2)}Â°<br>
          beta (tilt front/back): ${event.beta?.toFixed(2)}Â°<br>
          gamma (tilt left/right): ${event.gamma?.toFixed(2)}Â°
        `;
      });
    };

    // --- Generic Sensor API ---
    document.getElementById("startGeneric").onclick = () => {
      const output = document.getElementById("genericOutput");

      try {
        const sensor = new Accelerometer({ frequency: 30 });
        sensor.addEventListener("reading", () => {
          output.innerHTML = `
            Accelerometer values:<br>
            x: ${sensor.x.toFixed(2)} | y: ${sensor.y.toFixed(2)} | z: ${sensor.z.toFixed(2)}
          `;
        });
        sensor.addEventListener("error", (e) => {
          output.textContent = `Sensor error: ${e.error.name}`;
        });
        sensor.start();
      } catch (e) {
        output.textContent = `Generic Sensor API not supported: ${e.message}`;
      }
    };

    // --- Touch Input ---
    const touchOutput = document.getElementById("touchOutput");
    window.addEventListener("touchstart", (e) => {
      const t = e.touches[0];
      touchOutput.textContent = `Touch start â†’ x: ${t.clientX}, y: ${t.clientY}`;
    });
    window.addEventListener("touchmove", (e) => {
      const t = e.touches[0];
      touchOutput.textContent = `Touch move â†’ x: ${t.clientX}, y: ${t.clientY}`;
    });
    window.addEventListener("touchend", () => {
      touchOutput.textContent = `Touch end`;
    });

    // --- Voice Input ---
    document.getElementById("startVoice").onclick = () => {
      const output = document.getElementById("voiceOutput");

      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        output.textContent = "Speech recognition not supported in this browser.";
        return;
      }

      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "en-US";
      recognition.continuous = true;
      recognition.interimResults = false;

      recognition.onresult = (event) => {
        const transcript = event.results[event.results.length - 1][0].transcript.trim();
        output.textContent = `Heard: "${transcript}"`;
      };

      recognition.onerror = (err) => {
        output.textContent = `Speech error: ${err.error}`;
      };

      recognition.start();
      output.textContent = "Listening... speak into the mic ğŸ¤";
    };

    // --- Geolocation ---
    document.getElementById("getLocation").onclick = () => {
      const output = document.getElementById("geoOutput");

      if (!("geolocation" in navigator)) {
        output.textContent = "Geolocation not supported.";
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude, accuracy } = pos.coords;
          output.innerHTML = `Latitude: ${latitude.toFixed(6)}<br>
                              Longitude: ${longitude.toFixed(6)}<br>
                              Accuracy: Â±${accuracy} m`;
        },
        (err) => {
          output.textContent = `Error: ${err.message}`;
        }
      );
    };

    // --- Ambient Light Sensor ---
    document.getElementById("startLight").onclick = () => {
      const output = document.getElementById("lightOutput");

      try {
        const sensor = new AmbientLightSensor();
        sensor.addEventListener("reading", () => {
          output.textContent = `Light level: ${sensor.illuminance.toFixed(2)} lux`;
        });
        sensor.addEventListener("error", (e) => {
          output.textContent = `Light sensor error: ${e.error.name}`;
        });
        sensor.start();
      } catch (e) {
        output.textContent = `AmbientLightSensor not supported: ${e.message}`;
      }
    };
  </script>
</body>

</html>