<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Browser Sensor Playground</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #0f0;
      padding: 1.5rem;
    }
    h1, h2 { color: #00ff99; }
    button {
      padding: 0.6rem 1rem;
      margin: 0.3rem;
      font-size: 1rem;
      background: #333;
      color: #0f0;
      border: 1px solid #0f0;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #0f0;
      color: #111;
    }
    .output {
      background: #222;
      padding: 0.7rem;
      border-radius: 8px;
      font-family: monospace;
      margin-top: 0.5rem;
    }
  </style>
</head>

<body>
  <h1>ğŸŒ Browser Sensor Playground</h1>
  <p>Click the buttons below to enable and visualize different sensors.</p>
  <hr>

  <!-- Generic Sensor API: Accelerometer -->
  <h2>ğŸ§© Generic Sensor API â€“ Accelerometer</h2>
  <button id="startGeneric">Start</button>
  <button id="stopGeneric">Stop</button>
  <div id="genericOutput" class="output">Not started.</div>
  <hr>

  <!-- Generic Sensor API: Ambient Light -->
  <h2>ğŸ’¡ Generic Sensor API â€“ Ambient Light Sensor</h2>
  <button id="startLight">Start</button>
  <button id="stopLight">Stop</button>
  <div id="lightOutput" class="output">Not started.</div>
  <hr>

  <!-- Device Motion -->
  <h2>ğŸ“± Device Motion Event (Acceleration + Rotation)</h2>
  <button id="startMotion">Start</button>
  <button id="stopMotion">Stop</button>
  <div id="motionOutput" class="output">Not started.</div>
  <hr>

  <!-- Device Orientation -->
  <h2>ğŸ§­ Device Orientation Event (Tilt)</h2>
  <button id="startOrientation">Start</button>
  <button id="stopOrientation">Stop</button>
  <div id="orientationOutput" class="output">Not started.</div>
  <hr>

  <!-- Web Speech -->
  <h2>ğŸ¤ Web Speech API</h2>
  <button id="startVoice">Start</button>
  <button id="stopVoice">Stop</button>
  <div id="voiceOutput" class="output">Not started.</div>
  <hr>

  <!-- Geolocation -->
  <h2>ğŸ“ Geolocation API</h2>
  <button id="getLocation">Get Location</button>
  <button id="stopGeo">Clear</button>
  <div id="geoOutput" class="output">Not started.</div>
  <hr>

  <!-- Touch -->
  <h2>ğŸ‘† Touch Input</h2>
  <p>Touch or drag your finger on the screen.</p>
  <div id="touchOutput" class="output">Waiting for touch...</div>

  <script>
    // ===========================
    // GENERIC SENSOR: ACCELEROMETER
    // ===========================
    let genericSensor;
    document.getElementById("startGeneric").onclick = () => {
      const output = document.getElementById("genericOutput");
      try {
        genericSensor = new Accelerometer({ frequency: 30 });
        genericSensor.addEventListener("reading", () => {
          output.innerHTML = `
            Accelerometer:<br>
            x: ${genericSensor.x.toFixed(2)} | y: ${genericSensor.y.toFixed(2)} | z: ${genericSensor.z.toFixed(2)}
          `;
        });
        genericSensor.addEventListener("error", e => {
          output.textContent = `Error: ${e.error.name}`;
        });
        genericSensor.start();
      } catch (e) {
        output.textContent = `Generic Sensor API not supported: ${e.message}`;
      }
    };
    document.getElementById("stopGeneric").onclick = () => {
      if (genericSensor) genericSensor.stop();
      document.getElementById("genericOutput").textContent = "Stopped.";
    };

    // ===========================
    // GENERIC SENSOR: AMBIENT LIGHT
    // ===========================
    let lightSensor;
    document.getElementById("startLight").onclick = () => {
      const output = document.getElementById("lightOutput");
      try {
        lightSensor = new AmbientLightSensor();
        lightSensor.addEventListener("reading", () => {
          output.textContent = `Light level: ${lightSensor.illuminance.toFixed(2)} lux`;
        });
        lightSensor.addEventListener("error", e => {
          output.textContent = `Error: ${e.error.name}`;
        });
        lightSensor.start();
      } catch (e) {
        output.textContent = `AmbientLightSensor not supported: ${e.message}`;
      }
    };
    document.getElementById("stopLight").onclick = () => {
      if (lightSensor) lightSensor.stop();
      document.getElementById("lightOutput").textContent = "Stopped.";
    };

    // ===========================
    // DEVICE MOTION EVENT
    // ===========================
    let motionHandler;
    document.getElementById("startMotion").onclick = async () => {
      const output = document.getElementById("motionOutput");
      if (typeof DeviceMotionEvent.requestPermission === "function") {
        const response = await DeviceMotionEvent.requestPermission();
        if (response !== "granted") {
          output.textContent = "Permission denied.";
          return;
        }
      }
      motionHandler = (event) => {
        const acc = event.accelerationIncludingGravity;
        const rot = event.rotationRate;
        output.innerHTML = `
          Acceleration (m/sÂ²): x:${acc?.x?.toFixed(2)} | y:${acc?.y?.toFixed(2)} | z:${acc?.z?.toFixed(2)}<br>
          Rotation (Â°/s): Î±:${rot?.alpha?.toFixed(2)} | Î²:${rot?.beta?.toFixed(2)} | Î³:${rot?.gamma?.toFixed(2)}
        `;
      };
      window.addEventListener("devicemotion", motionHandler);
    };
    document.getElementById("stopMotion").onclick = () => {
      if (motionHandler) window.removeEventListener("devicemotion", motionHandler);
      document.getElementById("motionOutput").textContent = "Stopped.";
    };

    // ===========================
    // DEVICE ORIENTATION EVENT
    // ===========================
    let orientationHandler;
    document.getElementById("startOrientation").onclick = async () => {
      const output = document.getElementById("orientationOutput");
      if (typeof DeviceOrientationEvent.requestPermission === "function") {
        const response = await DeviceOrientationEvent.requestPermission();
        if (response !== "granted") {
          output.textContent = "Permission denied.";
          return;
        }
      }
      orientationHandler = (event) => {
        output.innerHTML = `
          Î± (compass): ${event.alpha?.toFixed(2)}Â°<br>
          Î² (front/back tilt): ${event.beta?.toFixed(2)}Â°<br>
          Î³ (left/right tilt): ${event.gamma?.toFixed(2)}Â°
        `;
      };
      window.addEventListener("deviceorientation", orientationHandler);
    };
    document.getElementById("stopOrientation").onclick = () => {
      if (orientationHandler) window.removeEventListener("deviceorientation", orientationHandler);
      document.getElementById("orientationOutput").textContent = "Stopped.";
    };

    // ===========================
    // WEB SPEECH API
    // ===========================
    let recognition;
    document.getElementById("startVoice").onclick = () => {
      const output = document.getElementById("voiceOutput");
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        output.textContent = "Speech recognition not supported.";
        return;
      }
      recognition = new SpeechRecognition();
      recognition.lang = "en-US";
      recognition.continuous = true;
      recognition.interimResults = false;
      recognition.onresult = (e) => {
        const transcript = e.results[e.results.length - 1][0].transcript.trim();
        output.textContent = `Heard: "${transcript}"`;
      };
      recognition.onerror = (e) => output.textContent = `Error: ${e.error}`;
      recognition.start();
      output.textContent = "Listening...";
    };
    document.getElementById("stopVoice").onclick = () => {
      if (recognition) recognition.stop();
      document.getElementById("voiceOutput").textContent = "Stopped.";
    };

    // ===========================
    // GEOLOCATION
    // ===========================
    document.getElementById("getLocation").onclick = () => {
      const output = document.getElementById("geoOutput");
      if (!("geolocation" in navigator)) {
        output.textContent = "Geolocation not supported.";
        return;
      }
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude, accuracy } = pos.coords;
          output.innerHTML = `Latitude: ${latitude.toFixed(6)}<br>
                              Longitude: ${longitude.toFixed(6)}<br>
                              Accuracy: Â±${accuracy} m`;
        },
        (err) => {
          output.textContent = `Error: ${err.message}`;
        }
      );
    };
    document.getElementById("stopGeo").onclick = () => {
      document.getElementById("geoOutput").textContent = "Cleared.";
    };

    // ===========================
    // TOUCH
    // ===========================
    const touchOutput = document.getElementById("touchOutput");
    window.addEventListener("touchstart", (e) => {
      const t = e.touches[0];
      touchOutput.textContent = `Touch start â†’ x:${t.clientX}, y:${t.clientY}`;
    });
    window.addEventListener("touchmove", (e) => {
      const t = e.touches[0];
      touchOutput.textContent = `Touch move â†’ x:${t.clientX}, y:${t.clientY}`;
    });
    window.addEventListener("touchend", () => {
      touchOutput.textContent = "Touch end.";
    });
  </script>
</body>
</html>
